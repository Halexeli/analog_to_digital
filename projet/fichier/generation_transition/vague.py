import json
import sys

'''
cette fonction génère un fichier json de transition pour les carrés tournant
'''
def vague(ligne, col):
    a=[]
    b=[]
    c=[]
    for i in range(ligne):
        for j in range(col):
            if(i%2==0):
                if(j%3==0):
                    a.append([i,j])
                elif(j%3==1):
                    b.append([i,j])
                else:
                    c.append([i,j])
            else:
                if(j%3==0):
                    c.append([i,j])
                elif(j%3==1):
                    a.append([i,j])
                else:
                    b.append([i,j])

    data=[
        [3.5,
        [
            [
                a,
                [225, 0, 0.008, 0.008, -1, 1]
            ],
            [
                b,
                [180, 0, 0.008, 0.008, -1, 1] 
            ],
            [
                c,
                [180, 315, 0.008, 0.008, 1, -1]
            ]
        ]],
        [0.5,
        [
            [
                a,
                [180, 315, 0.01, 0.01, -1, -1]
            ],
            [
                b,
                [225, 0, 0.01, 0.01, 1, 1]
            ],
            [
                c,
                [180, 0, 0.01, 0.01, 1, 1]
            ]
        ]
        ],
        [0.5,
        [
            [
                a,
                [180, 0, 0.01, 0.01, 1, 1]
            ],
            [
                b,
                [180, 315, 0.01, 0.01, -1, -1]
            ],
            [
                c,
                [225, 0, 0.01, 0.01, 1, 1]
            ]
        ]],
        [0.5,
        [
            [
                a,
                [225, 0, 0.01, 0.01, 1, 1]
            ],
            [
                b,
                [180, 0, 0.01, 0.01, 1, 1] 
            ],
            [
                c,
                [180, 315, 0.01, 0.01, -1, -1]
            ]
        ]],
        [0.5,
        [
            [
                a,
                [180, 315, 0.01, 0.01, -1, -1]
            ],
            [
                b,
                [225, 0, 0.01, 0.01, 1, 1]
            ],
            [
                c,
                [180, 0, 0.01, 0.01, 1, 1]
            ]
        ]
        ],
        [0.5,
        [
            [
                a,
                [180, 0, 0.01, 0.01, 1, 1]
            ],
            [
                b,
                [180, 315, 0.01, 0.01, -1, -1]
            ],
            [
                c,
                [225, 0, 0.01, 0.01, 1, 1]
            ]
        ]],
        [0.5,
        [
            [
                a,
                [225, 0, 0.01, 0.01, 1, 1]
            ],
            [
                b,
                [180, 0, 0.01, 0.01, 1, 1] 
            ],
            [
                c,
                [180, 315, 0.01, 0.01, -1, -1]
            ]
        ]],
        [0.5,
        [
            [
                a,
                [180, 315, 0.01, 0.01, -1, -1]
            ],
            [
                b,
                [225, 0, 0.01, 0.01, 1, 1]
            ],
            [
                c,
                [180, 0, 0.01, 0.01, 1, 1]
            ]
        ]
        ],
        [0.5,
        [
            [
                a,
                [180, 0, 0.01, 0.01, 1, 1]
            ],
            [
                b,
                [180, 315, 0.01, 0.01, -1, -1]
            ],
            [
                c,
                [225, 0, 0.01, 0.01, 1, 1]
            ]
        ]],
        [0.5,
        [
            [
                a,
                [225, 0, 0.01, 0.01, 1, 1]
            ],
            [
                b,
                [180, 0, 0.01, 0.01, 1, 1] 
            ],
            [
                c,
                [180, 315, 0.01, 0.01, -1, -1]
            ]
        ]],
        [0.5,
        [
            [
                a,
                [180, 315, 0.01, 0.01, -1, -1]
            ],
            [
                b,
                [225, 0, 0.01, 0.01, 1, 1]
            ],
            [
                c,
                [180, 0, 0.01, 0.01, 1, 1]
            ]
        ]
        ],
        [0.5,
        [
            [
                a,
                [180, 0, 0.01, 0.01, 1, 1]
            ],
            [
                b,
                [180, 315, 0.01, 0.01, -1, -1]
            ],
            [
                c,
                [225, 0, 0.01, 0.01, 1, 1]
            ]
        ]]
    ]

    data_envoi={
        "taille": [ligne, col],
        "transition": data
    }


    with open('./transitions/vague_transition.json', "w") as f:
        json.dump(data_envoi, f)
    return "./transitions/vague_transition.json"

if __name__=='__main__':
    ligne=int(sys.argv[1])
    col = int(sys.argv[2])
    vague(ligne, col)
